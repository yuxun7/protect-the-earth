<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>é—œå¡ä¸€ï¼šæµ·ä¸Šåƒåœ¾é¢¨æš´</title>
  <style>
    body {
      margin: 0;
      font-family: "Arial", sans-serif;
      overflow: hidden;
    }
    #gameArea {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: url('images/background.jpg') no-repeat center center;
      background-size: cover;
    }
    #scoreBoard, #timer {
      position: absolute;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px 20px;
      border-radius: 10px;
      font-size: 18px;
      z-index: 10;
    }
    #scoreBoard { top: 10px; left: 10px; }
    #timer { top: 10px; right: 10px; }

    .trash {
      position: absolute;
      width: 50px;
      height: 50px;
      font-size: 40px;
      user-select: none;
      cursor: grab;
      transform-origin: center center;
    }

    .bin {
      position: absolute;
      bottom: 20px;
      width: 100px;
      height: 100px;
      background-color: rgba(0,0,0,0.5);
      color: white;
      text-align: center;
      line-height: 100px;
      border-radius: 10px;
      font-weight: bold;
    }

    #trashBin { left: 20px; background-color: #9e9e9e; }
    #recycleBin { right: 20px; background-color: #4caf50; }

    #endScreen, #startScreen {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.75);
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      text-align: center;
      z-index: 1000;
    }

    #endScreen { display: none; }
    #startScreen p {
      font-size: 20px;
      margin: 20px;
      max-width: 600px;
    }

    #startScreen button, #endScreen button {
      padding: 12px 24px;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      background-color: #ffffff;
      color: #000000;
      border: none;
      margin-top: 20px;
    }

    #endMessage {
      font-size: 24px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

<div id="gameArea">
  <!-- éŠæˆ²è³‡è¨Š -->
  <div id="scoreBoard">åˆ†æ•¸: 0</div>
  <div id="timer">æ™‚é–“: 60</div>

  <!-- åƒåœ¾æ¡¶ -->
  <div id="trashBin" class="bin">åƒåœ¾æ¡¶</div>
  <div id="recycleBin" class="bin">å›æ”¶æ¡¶</div>

  <!-- é–‹å§‹ç•«é¢ -->
  <div id="startScreen">
    <h1>ğŸŒŠ é—œå¡ä¸€ï¼šæµ·ä¸Šåƒåœ¾é¢¨æš´</h1>
    <p>æ‹–æ›³åƒåœ¾è‡³æ­£ç¢ºçš„åˆ†é¡æ¡¶ï¼<br>åˆ†é¡éŒ¯èª¤æœƒæ‰£åˆ†ï¼Œæ™‚é–“çµæŸå‰é”åˆ°100åˆ†æ‰å¯é€²å…¥ä¸‹ä¸€é—œï¼</p>
    <button onclick="startGame()">é–‹å§‹éŠæˆ²</button>
  </div>

  <!-- çµæŸç•«é¢ -->
  <div id="endScreen">
    <div id="endMessage"></div>
    <div id="finalScore"></div>
    <p>ğŸŒŠ å°çŸ¥è­˜ï¼šæ¯å¹´æœ‰è¶…é 800 è¬å™¸å¡‘è† æµå…¥æµ·æ´‹ï¼Œå¨è„…æµ·æ´‹ç”Ÿç‰©èˆ‡ç”Ÿæ…‹ç³»çµ±ã€‚</p>
    <button id="nextLevelBtn" onclick="goToNextLevel()" style="display: none;">é€²å…¥ä¸‹ä¸€é—œ</button>
    <button id="restartBtn" onclick="restartGame()" style="display: none;">é‡æ–°é–‹å§‹</button>
  </div>
</div>

<script>
  const trashData = [
    { icon: "ğŸ¥¢", type: "trash" },
    { icon: "ğŸ§´", type: "recycle" },
    { icon: "ğŸ±", type: "trash" },
    { icon: "ğŸ›ï¸", type: "trash" },
    { icon: "ğŸ¥¤", type: "recycle" },
    { icon: "ğŸ’¿", type: "recycle" }
  ];

  let score = 0;
  let timeLeft = 60;
  const totalTrash = 50;

  const gameArea = document.getElementById("gameArea");
  const scoreBoard = document.getElementById("scoreBoard");
  const timerDisplay = document.getElementById("timer");
  const endScreen = document.getElementById("endScreen");
  const endMessage = document.getElementById("endMessage");
  const finalScore = document.getElementById("finalScore");
  const startScreen = document.getElementById("startScreen");
  const nextLevelBtn = document.getElementById("nextLevelBtn");
  const restartBtn = document.getElementById("restartBtn");

  function updateScore(value) {
    score += value;
    scoreBoard.textContent = "åˆ†æ•¸: " + score;
  }

  function startTimer() {
    const timer = setInterval(() => {
      timeLeft--;
      timerDisplay.textContent = "æ™‚é–“: " + timeLeft;
      if (timeLeft <= 0) {
        clearInterval(timer);
        document.querySelectorAll('.trash').forEach(el => el.remove());
        showEndScreen();
      }
    }, 1000);
  }

  function showEndScreen() {
    endScreen.style.display = 'flex';
    finalScore.textContent = "ä½ çš„æœ€çµ‚å¾—åˆ†ç‚ºï¼š" + score + " åˆ†";

    if (score >= 100) {
      endMessage.textContent = "ğŸ‰ æ­å–œä½ æˆåŠŸéé—œï¼";
      nextLevelBtn.style.display = "inline-block";
      restartBtn.style.display = "none";
    } else {
      endMessage.textContent = "ğŸ˜¢ åˆ†æ•¸æœªé”100ï¼Œè«‹å†æ¥å†å²ï¼";
      nextLevelBtn.style.display = "none";
      restartBtn.style.display = "inline-block";
    }
  }

  function spawnTrash() {
    const areaWidth = window.innerWidth;
    const areaHeight = window.innerHeight - 120;

    for (let i = 0; i < totalTrash; i++) {
      const data = trashData[Math.floor(Math.random() * trashData.length)];
      const trash = document.createElement("div");
      trash.classList.add("trash");
      trash.textContent = data.icon;
      trash.dataset.type = data.type;

      const x = Math.random() * (areaWidth - 60);
      const y = Math.random() * (areaHeight - 60);
      const rot = Math.random() * 360;

      trash.style.left = `${x}px`;
      trash.style.top = `${y}px`;
      trash.style.transform = `rotate(${rot}deg)`;

      makeDraggable(trash);
      gameArea.appendChild(trash);
    }
  }

  function makeDraggable(el) {
    let offsetX, offsetY;

    el.addEventListener("mousedown", function (e) {
      offsetX = e.clientX - el.offsetLeft;
      offsetY = e.clientY - el.offsetTop;

      function moveAt(e) {
        el.style.left = `${e.clientX - offsetX}px`;
        el.style.top = `${e.clientY - offsetY}px`;
      }

      function onDrop(e) {
        document.removeEventListener("mousemove", moveAt);
        document.removeEventListener("mouseup", onDrop);

        const rectTrash = el.getBoundingClientRect();
        const trashBin = document.getElementById("trashBin").getBoundingClientRect();
        const recycleBin = document.getElementById("recycleBin").getBoundingClientRect();

        if (isIntersecting(rectTrash, trashBin)) {
          checkAnswer(el, "trash");
        } else if (isIntersecting(rectTrash, recycleBin)) {
          checkAnswer(el, "recycle");
        }
      }

      document.addEventListener("mousemove", moveAt);
      document.addEventListener("mouseup", onDrop);
    });
  }

  function isIntersecting(a, b) {
    return !(b.left > a.right || 
             b.right < a.left || 
             b.top > a.bottom ||
             b.bottom < a.top);
  }

  function checkAnswer(el, binType) {
    if (el.dataset.type === binType) {
      updateScore(10);
    } else {
      updateScore(-5);
    }
    el.remove();
  }

  function startGame() {
    score = 0;
    timeLeft = 60;
    scoreBoard.textContent = "åˆ†æ•¸: 0";
    timerDisplay.textContent = "æ™‚é–“: 60";
    startScreen.style.display = 'none';
    endScreen.style.display = 'none';
    nextLevelBtn.style.display = 'none';
    restartBtn.style.display = 'none';
    spawnTrash();
    startTimer();
  }

  function restartGame() {
    startGame();
  }

  function goToNextLevel() {
    window.location.href = "level2.html"; // é€™è£¡è«‹æ›¿æ›ç‚ºä½ çš„ç¬¬äºŒé—œ HTML æª”æ¡ˆåç¨±
  }
</script>

</body>
</html>


